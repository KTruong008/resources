# Poppy Selenium Tests

WebDriver front end test suite for poppy-frontend. Built to use the Chrome webdriver in Python.

## Install

* Create a virtual environment
* run `pip install -r requirements.txt`
* Install Chrome webdriver: `brew install chromedriver`
* Create a .env file at the same level as this README.md and populate it with variables as per example_env

## Running the test suite

To run the whole test suite:

`python run_tests.py`

To run a specific test module (currently no way to run an individual test):

`python run_tests.py --filename=test_vehicle_add_form.py`

To override user_email and password in .env:

`python run_tests.py --user_email=csgwebapps.qa+49@gmail.com --password=PasswordNew`

To override postal_code for signup .env:

`python run_tests.py --postal_code=True`

To turn on screenshots:

`python run_tests.py --screenshots=True`

To run a specific test on a different url than .env:

`python run_tests.py --domain_url=https://dev-smartcov-oss-csgwebapps.com`

To run a scenario (Made for BAs to fill out forms more efficiently):

`python run_scenario.py <scenario>`

e.g.:
`python run_scenario.py login`   (Note that there is no .py added to the end)
`python run_scenario.py add_vehicle`

To run a scenario with a different user_email or password than in .env:

`python run_scenario.py add_vehicle --user_email=csgwebapps.qa+49@gmail.com --password=NewPass`

To run a scenario with a different domain_url than in .env:

`python run_scenario.py add_vehicle --domain_url=https://local-smartcov.oss.csgwebapps.com`

Scenarios open a new browser and fill out specific forms for you so you don't have to manually click and type. Make sure you QUIT out of the browser generated by the scenario, not just close it, or else your computer will be burning a lot of resources trying to maintain several webdriver app instances.


## Install on Windows

* Visit the [Python downloads](https://www.python.org/downloads/) and click on the version number you wish to use - typically Python 3.x. Scroll down to the bottom of the version page and you'll find the files associated with that version.

* Locate the Windows x86 executable installer (64 bit should work, if not 32 bit) and click to download. The installer should begin looking like this:

!(python installer)[https://docs.python.org/3/_images/win_installer.png]

* **IMPORTANT**: Make sure 'Install launcher for all users' is checked, and click the box to 'Add Python X.X to PATH'.

* Open a command console by searching for 'CMD' in the start menu.

* Try typing `python` in the command console, you should see the Python shell prompt if it worked (`>>>`). Type `exit()` to leave the Python shell.

* Navigate to the folder where the selenium tests are stored (`cd C:\SOME\WHERE` ??)

* Type `pip install -r requirements.txt` to install dependencies.

* To install the Chrome webdriver, head over to the [ChromeDriver page](https://sites.google.com/a/chromium.org/chromedriver/downloads) and click the latest release at the top. The win32 version is the correct installer.
